{% extends "gymkhana.html" %}

{% block content %}


<h1>Event Details</h1>

<fieldset>
	<h2>Title: {{ event.title }} {% if manager %} - Manage by: {{ manager.user.username }} {% endif %}</h2>
	<ul type="circle">

		<br>
		<li><strong>Unique Identifier:</strong> {{ event.id }}</li>

		<li><strong>Place:</strong> {{ event.place }}</li>

		<li><strong>Celebration:</strong> {{ event.celebration }}</li>

		<li><strong>Language:</strong> {{ event.language }}</li>

		<li><strong>Difficulty:</strong> <img src="/gymkhana/templates/images/{{ event.difficulty }}.png" /></li>

		<li><strong>Max. Score:</strong> {{ event.score }} points</li>

		{% ifequal event.image "" %}
		{% else %}
			<li><strong>Promotional Image:</strong> <div><img alt="" class="photoResponse" src="/gymkhana/img/{{ event.image }}"/></div>

<!--<div><a href="javascript:void(0);" onmouseover="return overlib('<img src=&#34/gymkhana/img/{{ event.image }}&#34 width=1000 />')" onmouseout="nd();"><img alt="" class="photoResponse" src="/gymkhana/img/{{ event.image }}"/></a></div>-->

			</li>

		{% endifequal %}

		<li><strong>Organizer manages the teams configuration:</strong> {{ event.configurate_teams }}</li>

		<li><strong>Challenges:</strong> {{ num_challenges }} Challenge{{ num_challenges|pluralize }}</li>

		<li><strong>Teams:</strong> {{ num_teams }} Participant Team{{ num_teams|pluralize }}</li>

		{% if event.objectives %}
		<li>
			<strong>Learning Objectives:</strong><br></br>
			<ul>
			{% for learning_objective in event.objectives.all %}
			<li>{{ learning_objective.objective }}</li>
			{% endfor %}
			</ul>
		</li>
		{% endif %}

		<li><strong>Welcome Text:</strong> {{ event.welcome_text }}</li>

		<li><strong>Goodbye Text:</strong> {{ event.goodbye_text }}</li>

		<li><strong>Is Closed:</strong> {{ event.is_closed }}</li>

	</ul>

	{% if isAdmin %}
	<div>
		{% if event.is_closed %}
		<a href="/gymkhana/event/{{ event.id }}/set_status/" data-role="button"  data-inline="true" data-ajax="false" class="small">Open</a><a href="/gymkhana/event/{{ event.id }}/delete/" data-role="button"  data-inline="true" data-ajax="false" class="small">Delete</a>
		{% else %}
		<a href="/gymkhana/event/{{ event.id }}/set_status/" data-role="button"  data-inline="true" data-ajax="false" class="small">Close</a><a href="/gymkhana/event/{{ event.id }}/delete/" data-role="button"  data-inline="true" data-ajax="false" class="small">Delete</a>
		{% endif %}
	</div>
	<br>
	{% endif %}
</fieldset>


{% if isAdmin %}
<fieldset>
	<legend>Adding Challenges</legend>
	<form name="form1" action="/gymkhana/event/{{ event.id }}/challenge/create/" method="post" enctype="multipart/form-data" data-ajax="false" onsubmit="return checkRequiredForm1(this)">
		<br></br>
			<label for="challenge" class="required">Challenge:</label>
			<textarea id="challenge" name="challenge" rows="5" cols="58">Challenge...</textarea>
		<br></br>
			<label for="picture" class="required">Picture:</label>
			<input type="file" id="photo" name="photo" value="photo"/>
		<br></br>
			<label for="max_score" class="required">Maximum Score:</label>
			<input type="text" id="max_score" name="max_score" size="4" maxlength="4" value="100"/>
		<br></br>
			<p>Type</p>

			<fieldset data-role="controlgroup" id="simple">
				<input type="radio" name="challenge_type" id="textual" value="1"  checked="checked"/>
				<label for="textual" class="challenge_type">Textual</label>
				<input type="radio" name="challenge_type" id="Ophoto"value="2"/>
				<label for="Ophoto" class="challenge_type">Photo</label>
				<input type="radio" name="challenge_type" id="location" value="3"/>
				<label for="location" class="challenge_type">Location</label>
			</fieldset>
		<br></br>

		<div id="correct">

			<p>Response Must be Correct to Continue:</p>
			<label for="is_stop" class="is_stop">
			<input type="radio" name="is_stop" value="Yes">Yes</input></label>
			<label for="is_stop" class="is_stop">
			<input type="radio" name="is_stop" value="No" checked>No</input></label>
			<br></br>

		</div>

		<div id="skip">

			<p>Team Can Skip to Another Challenge:</p>
			<label for="can_skip" class="can_skip">
			<input type="radio" name="can_skip" value="Yes">Yes</input></label>
			<label for="can_skip" class="can_skip">
			<input type="radio" name="can_skip" value="No" checked>No</input></label>
			<br></br>

		</div>

		<div id="solutions">

			<label for="select" class="required">Number Possible Solutions:</label>
			<select name="select_num_possible_solutions" id="select_num_possible_solutions" onchange="alertSelected1()">
					<option value="1">1</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5</option>
			</select>

			<div id="div_possible_solutions">
				<br>
				<label for="possible_solution_1" class="required">Solution:</label>
				<input type="text" id="possible_solution_1" name="possible_solution_1" size="45" maxlength="255"/>

			</div>
			<br></br>
		</div>

		<div id="coords">

			<label for="target_latitude" class="target_latitude">Target Latitude:</label>
			<input type="text" id="target_latitude" name="target_latitude" size="15" maxlength="15"/>

			<label for="target_longitude" class="target_longitude">Target Longitude:</label>
			<input type="text" id="target_longitude" name="target_longitude" size="15" maxlength="15"/>

			<label for="min_distance" class="min_distance">Min Distance to Place (meters):</label>
			<input type="text" id="min_distance" name="min_distance" size="5" maxlength="5"/>

			<p>Mark Place to Team:</p>
			<fieldset data-role="controlgroup" id="simple">
				<input type="radio" name="mark_target_place" id="mark_target_place" value="Yes"/>
				<label for="mark_target_place" class="mark_target_place">Yes</label>
				<input type="radio" name="mark_target_place" id="mark_target_placeN" value="No" checked/>
				<label for="mark_target_placeN" class="mark_target_place">No</label>
			</fieldset>
			<br><br>
		</div>

		<div id="clues">
			<label for="select" class="required">Clues:</label>
			<select name="select_num_clues" id="select_num_clues" onchange="alertSelected2()">
				<option value="0">0</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
			</select>
			<div name="div_clues" id="div_clues">
			</div>
		</div>

		<br></br>

                {% if event.objectives.all %}
		<div id="learning">
			Learning Objectives:
                        {% for learning_objective in event.objectives.all %}
				<label for="learning_objective_{{ forloop.counter }}">{{ learning_objective.objective }}
				<input type="checkbox" name="learning_objective_{{ forloop.counter }}"  value="{{ learning_objective.id }}"></label>
			{% endfor %}
		</div>
                {% endif %}

		<br>

		<input type="submit" value="Add"/><br>

		<div data-role="fieldcontain" id="insert">

			{% if challenges %}
			<label>Insert New Challenge in Position Number:</label><br><br>
			<fieldset class="ui-grid-a" id="simple">
				<div class="ui-block-a">
				    <select name="position">
					<option value="None">-</option>
					{% for challenge in challenges %}
					<option value="{{ challenge.id }}">{{ challenge.number }}</option>
					{% endfor %}
   				    </select>
				</div>

				<div class="ui-block-b"> 
					<input type="submit" value="Insert"/>
				</div>
			</fieldset>
			{% endif %}
			<br>
		</div>

	</form>
</fieldset>


{% if challenges %}
<fieldset>
	<legend>Listing Challenges</legend>
	<div name="fieldset_content" id="fieldset_content">
	<ol>
	{% for challenge in challenges %}
		<li>
			<h3>Challenge #{{ challenge.number }} (identifier: {{ challenge.id }} - number: {{ challenge.number}}) - Max Score: {{ challenge.max_score }}</h3>
		{% ifequal challenge.picture "" %}
		{% else %}
			<div><img alt="" class="photoResponse" src="/gymkhana/img/{{ challenge.picture }}"/></div>
<!--			<div><a href="javascript:void(0);" onmouseover="return overlib('<img src=&#34/gymkhana/img/{{ challenge.picture }}&#34 width=1000 />')" onmouseout="nd();"><img alt="" class="photoResponse" src="/gymkhana/img/{{ challenge.picture }}"/></a></div>-->
		{% endifequal %}
		<ul>
		<li>
			<strong>Challenge:</strong> {{ challenge.challenge }}
		</li>
		{% ifequal challenge.challenge_type 1 %}
		<li><strong>Textual - Augmented Reality:</strong> {% if challenge.augmented_reality %}Yes{% else %}No{% endif %}</li>
		<li>
			<strong>Possible Solutions:</strong><br></br>
			<ul name="subul" id="subul">
				{% for solution in challenge.solution_set.all|dictsort:"id" %}
				<li>{{ solution.possible_solution }}</li>
				{% endfor %}
			</ul>
		</li>
		{% endifequal %}
		<li>
			{% if challenge.clue_set.all %}
			<strong>Clues:</strong><br></br>
			<ul name="subul" id="subul">
				{% for clue in challenge.clue_set.all|dictsort:"number" %}
				<li>#{{ clue.number }}: {{ clue.help }} (cost: {{ clue.cost }} points)</li>
				{% endfor %}
			</ul>
			{% else %}
			No clues for this challenge.
			{% endif %}
		</li>
		<li>
			<strong>Response must be Correct to Continue:</strong> {{ challenge.is_stop }}
		</li>
		<li>
			<strong>Challenge Can be Skipped:</strong> {{ challenge.can_skip }}
		</li>
		<li>
			<strong>Type:</strong>
				{% ifequal challenge.challenge_type 1 %}Textual{% endifequal %}
				{% ifequal challenge.challenge_type 2 %}Photo{% endifequal %}
				{% ifequal challenge.challenge_type 3 %}
				Location (target: latitude {{ challenge.target_place.y }}; longitude {{ challenge.target_place.x }})
				{% endifequal %}
		</li>
		{% ifequal challenge.challenge_type 3 %}
		<li>
			<strong>Min Distance to Target Place:</strong> {{ challenge.distance_to_target_place }} meter{{ challenge.distance_to_target_place|pluralize }}
		</li>
		<li>
			<strong>Mark Target Place to Team:</strong> {% if challenge.mark_place %}Yes{% else %}No{% endif %}
		</li>
		{% endifequal %}
		<li>
			<strong>Next Challenge Identifier:</strong> {{ challenge.next_challenge_id }}
		</li>
		<li>
			<strong>Learning Objectives:</strong>
			{% if challenge.objectives.all %}
			<ul>
				{% for learnobj in challenge.objectives.all %}
				<li>{{ learnobj.objective }}</li>
				{% endfor %}
			</ul>
			{% else %}
			None
			{% endif %}
		</li>
		</ul>
		<form action="/gymkhana/event/{{ event.id }}/challenge/{{ challenge.id }}/delete/" method="get" data-ajax="false">
			<input type="submit" value="Delete"></input>
		</form>
		</li>
		<br>
	{% endfor %}
		</ol>
	</div>
</fieldset>
{% endif %} <!-- if challenges -->

<fieldset>
	<legend>Adding Teams</legend>
	<ul>
		<li><strong>Create & Subscribe to Event:</strong>
			<form name="form2" action="/gymkhana/event/{{ event.id }}/team/create/" method="post" enctype="multipart/form-data" data-ajax="false" onsubmit="return checkRequiredForm2(this)">
				<br>
					<label for="teamname" class="required">Team Name:</label>
					<input type="text" id="teamname" name="teamname" size="50" maxlength="255" required/>
				<br></br>
					<label for="first_challenge_team" class="required">First Challenge for This Team:</label>
					<fieldset class="ui-grid-a" id="simple">
						<div class="ui-block-a">
							<select name="first_challenge_team_id">
								<option value="None">-</option>
								{% for challenge in challenges %}
								<option value="{{ challenge.id }}">{{ challenge.number }}</option>
								{% endfor %}
							</select>
						</div>
						<div class="ui-block-b"> 
							<input type="submit" value="Add"></input>
						</div>
					</fieldset>
			</form>
		</li>

		{% if all_teams %}

		<br></br>

		<li><strong>Subscribe to Event:</strong>
			<form action="/gymkhana/event/{{ event.id }}/team/subscribe/" method="post" enctype="multipart/form-data" data-ajax="false">
				<br>
					<select name="team_to_subscribe_id">
						{% for team in all_teams %}
						<option value="{{ team.id }}">{{ team.group.name }}</option>
						{% endfor %}
					</select>
				<br></br>

					<label for="first_challenge_team" class="required">First Challenge for This Team:</label>
					<fieldset class="ui-grid-a" id="simple">
						<div class="ui-block-a">
							<select name="first_challenge_team_id">
								<option value="None">-</option>
								{% for challenge in challenges %}
									<option value="{{ challenge.id }}">{{ challenge.number }}</option>
								{% endfor %}
							</select>
						</div>

						<div class="ui-block-b"> 
							<input type="submit" value="Subscribe"></input>
						</div>
					</fieldset>
			</form>
		</li>
		{% endif %}
	</ul>

</fieldset>

{% endif %} <!-- if isAdmin -->

{% if teams %}

<fieldset>
	<legend>Listing Teams</legend>
	<div name="fieldset_content" id="fieldset_content">
	<ul>
	{% for team in teams %}
		<li>
			<strong>Team Name:</strong> <a href="/gymkhana/event/{{ event.id }}/team/{{ team.id }}/show/">{{ team.group.name }}</a> (id: {{ team.id }})
		<ul><br>
		<li>
			<strong>Event:</strong> {{ event.title }}
		</li>

		{% for first_challenge in first_challenges %}
		{% ifequal team first_challenge.team %}
		{% ifequal event first_challenge.event %}
		<li>
			<strong>First Challenge:</strong> #{{ first_challenge.first_challenge.number }} (id: {{ first_challenge.first_challenge.id }})
		</li>
		{% endifequal %}
		{% endifequal %}
		{% endfor %}

		{% if isAdmin %}
		{% if challenges %}
		<li>
			<form action="/gymkhana/event/{{ event.id }}/team/{{ team.id }}/edit/" method="get" data-ajax="false">
				<!--<label for="first_proof_team" class="required">--><strong>Change First Challenge:</strong><!--</label>-->
				<fieldset class="ui-grid-a" id="simple">
					<div class="ui-block-a">
						<select name="first_challenge_team_id">
							<option value="None">-</option>
							{% for challenge in challenges %}
							<option value="{{ challenge.id }}">{{ challenge.number }}</option>
							{% endfor %}
						</select>
					</div>
					<div class="ui-block-b"> 
						<input type="submit" value="Change"></input>
					</div>
				</fieldset>
			</form>
		</li>
		{% endif %}
		{% endif %}
		</ul>

		<form action="/gymkhana/event/{{ event.id }}/team/{{ team.id }}/delete/" method="get" data-ajax="false">
			<input type="submit" value="Delete"></input>
		</form>
		<br>
		</li>
	{% endfor %}
	</ul>
	</div>

</fieldset>

{% if isAdmin %}
{% endif %} <!-- if isAdmin -->

{% endif %} <!-- if teams -->

{% endblock %}



{% block contentM %}




<h1>Event Details</h1>

<fieldset>

	<h2>Title: {{ event.title }} {% if manager %} - Manage by: {{ manager.user.username }} {% endif %}</h2>
	<ul type="circle">

		<br>
		<li><strong>Unique Identifier:</strong> {{ event.id }}</li>

		<li><strong>Place:</strong> {{ event.place }}</li>

		<li><strong>Celebration:</strong> {{ event.celebration }}</li>

		<li><strong>Language:</strong> {{ event.language }}</li>

		<li><strong>Difficulty:</strong> <img src="/gymkhana/templates/images/{{ event.difficulty }}.png" /></li>

		<li><strong>Max. Score:</strong> {{ event.score }} points</li>

		{% ifequal event.image "" %}

		{% else %}

			<li><strong>Promotional Image:</strong> <div><img alt="" class="photoResponse" src="/gymkhana/img/{{ event.image }}"/></div>

			</li>


		{% endifequal %}

		<li><strong>Organizer manages the teams configuration:</strong> {{ event.configurate_teams }}</li>

		<li><strong>Challenges:</strong> {{ num_challenges }} Challenge{{ num_challenges|pluralize }}</li>

		<li><strong>Teams:</strong> {{ num_teams }} Participant Team{{ num_teams|pluralize }}</li>

		{% if event.objectives %}

		<li>

			<strong>Learning Objectives:</strong><br></br>
			<ul>
			  {% for learning_objective in event.objectives.all %}
			    <li>{{ learning_objective.objective }}</li>
			  {% endfor %}
			</ul>

		</li>

		{% endif %}

		<li><strong>Welcome Text:</strong> {{ event.welcome_text }}</li>
		<li><strong>Goodbye Text:</strong> {{ event.goodbye_text }}</li>
		<li><strong>Is Closed:</strong> {{ event.is_closed }}</li>

	</ul>


	{% if isAdmin %}

	<div>

		{% if event.is_closed %}

		<a href="/gymkhana/event/{{ event.id }}/set_status/" data-role="button"  data-inline="true" data-ajax="false" class="small">Open</a><a href="/gymkhana/event/{{ event.id }}/delete/" data-role="button"  data-inline="true" data-ajax="false" class="small">Delete</a>

		{% else %}

		<a href="/gymkhana/event/{{ event.id }}/set_status/" data-role="button"  data-inline="true" data-ajax="false" class="small">Close</a><a href="/gymkhana/event/{{ event.id }}/delete/" data-role="button"  data-inline="true" data-ajax="false" class="small">Delete</a>

		{% endif %}

	</div>

	<br>

	{% endif %}

</fieldset>





{% if isAdmin %}

<fieldset>

	<legend>Adding Challenges</legend>

	<form name="form1" action="/gymkhana/event/{{ event.id }}/challenge/create/" method="post" enctype="multipart/form-data" data-ajax="false" onsubmit="return checkRequiredForm1(this)">

		<br></br>

			<label for="challenge" class="required">Challenge:</label>
			<textarea id="challenge" name="challenge" rows="5" cols="58">Challenge...</textarea>

		<br></br>

			<label for="picture" class="required">Picture:</label>
			<input type="file" id="photo" name="photo" value="photo"/>

		<br></br>

			<label for="max_score" class="required">Maximum Score:</label>
			<input type="text" id="max_score" name="max_score" size="4" maxlength="4" value="100"/>

		<br></br>

			<p>Type</p>

			<fieldset data-role="controlgroup" id="simple">
				<input type="radio" name="challenge_type" id="textual" value="1"  checked="checked"/>
				<label for="textual" class="challenge_type">Textual</label>
				<input type="radio" name="challenge_type" id="Ophoto"value="2"/>
				<label for="Ophoto" class="challenge_type">Photo</label>
				<input type="radio" name="challenge_type" id="location" value="3"/>
				<label for="location" class="challenge_type">Location</label>
			</fieldset>

		<br></br>

		<div id="correct">
			<p>Response Must be Correct to Continue:</p>
			<label for="is_stop" class="is_stop">
			<input type="radio" name="is_stop" value="Yes">Yes</input></label>
			<label for="is_stop" class="is_stop">
			<input type="radio" name="is_stop" value="No" checked>No</input></label>
			<br></br>
		</div>

		<div id="skip">

			<p>Team Can Skip to Another Challenge:</p>
			<label for="can_skip" class="can_skip">
			<input type="radio" name="can_skip" value="Yes">Yes</input></label>
			<label for="can_skip" class="can_skip">
			<input type="radio" name="can_skip" value="No" checked>No</input></label>
			<br></br>

		</div>


		<div id="solutions">

			<label for="select" class="required">Number Possible Solutions:</label>
			<select name="select_num_possible_solutions" id="select_num_possible_solutions" onchange="alertSelected1()">
					<option value="1">1</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5</option>
			</select>

			<div id="div_possible_solutions">
				<br>
				<label for="possible_solution_1" class="required">Solution:</label>
				<input type="text" id="possible_solution_1" name="possible_solution_1" size="45" maxlength="255"/>
			</div>

			<br></br>

		</div>


		<div id="coords">

			<label for="target_latitude" class="target_latitude">Target Latitude:</label>
			<input type="text" id="target_latitude" name="target_latitude" size="15" maxlength="15"/>
			<label for="target_longitude" class="target_longitude">Target Longitude:</label>
			<input type="text" id="target_longitude" name="target_longitude" size="15" maxlength="15"/>

			<label for="min_distance" class="min_distance">Min Distance to Place (meters):</label>
			<input type="text" id="min_distance" name="min_distance" size="5" maxlength="5"/>

			<p>Mark Place to Team:</p>

			<fieldset data-role="controlgroup" id="simple">
				<input type="radio" name="mark_target_place" id="mark_target_place" value="Yes"/>
				<label for="mark_target_place" class="mark_target_place">Yes</label>
				<input type="radio" name="mark_target_place" id="mark_target_placeN" value="No" checked/>
				<label for="mark_target_placeN" class="mark_target_place">No</label>
			</fieldset>

			<br><br>

		</div>

		<div id="clues">
			<label for="select" class="required">Clues:</label>
			<select name="select_num_clues" id="select_num_clues" onchange="alertSelected2()">
				<option value="0">0</option>
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
			</select>
			<div name="div_clues" id="div_clues">
			</div>

		</div>

		<br></br>



                {% if event.objectives.all %}

		<div id="learning">
			Learning Objectives:
                        {% for learning_objective in event.objectives.all %}
				<label for="learning_objective_{{ forloop.counter }}">{{ learning_objective.objective }}
				<input type="checkbox" name="learning_objective_{{ forloop.counter }}"  value="{{ learning_objective.id }}"></label>
			{% endfor %}

		</div>

                {% endif %}

		<br>

		<input type="submit" value="Add"/><br>


			{% if challenges %}

			<label>Insert New Challenge in Position Number:</label><br><br>

			<fieldset class="ui-grid-a" id="simple">
				<div class="ui-block-a">

				    <select name="position">
					<option value="None">-</option>
					{% for challenge in challenges %}
					<option value="{{ challenge.id }}">{{ challenge.number }}</option>
					{% endfor %}
   				    </select>

				</div>

				<div class="ui-block-b"> 
					<input type="submit" value="Insert"/>
				</div>
			</fieldset>

			{% endif %}

			<br>

	</form>

</fieldset>


{% if challenges %}

<fieldset>

	<legend>Listing Challenges</legend>

	<div name="fieldset_content" id="fieldset_content">

	<ol>

	{% for challenge in challenges %}

		<li>

			<h3>Challenge #{{ challenge.number }} (identifier: {{ challenge.id }} - number: {{ challenge.number}}) - Max Score: {{ challenge.max_score }}</h3>

		{% ifequal challenge.picture "" %}

		{% else %}

			<div><img alt="" class="photoResponse" src="/gymkhana/img/{{ challenge.picture }}"/></div>


		{% endifequal %}

		<ul>

		<li>
			<strong>Challenge:</strong> {{ challenge.challenge }}
		</li>

		{% ifequal challenge.challenge_type 1 %}

		<li><strong>Textual - Augmented Reality:</strong> {% if challenge.augmented_reality %}Yes{% else %}No{% endif %}</li>

		<li>
			<strong>Possible Solutions:</strong><br></br>
			<ul name="subul" id="subul">
				{% for solution in challenge.solution_set.all|dictsort:"id" %}
				<li>{{ solution.possible_solution }}</li>
				{% endfor %}
			</ul>
		</li>

		{% endifequal %}

		<li>
			{% if challenge.clue_set.all %}
			<strong>Clues:</strong><br></br>
			<ul name="subul" id="subul">
				{% for clue in challenge.clue_set.all|dictsort:"number" %}
				  <li>#{{ clue.number }}: {{ clue.help }} (cost: {{ clue.cost }} points)</li>
				{% endfor %}
			</ul>
			{% else %}
		  	  No clues for this challenge.
			{% endif %}
		</li>

		<li>
			<strong>Response must be Correct to Continue:</strong> {{ challenge.is_stop }}
		</li>

		<li>
			<strong>Challenge Can be Skipped:</strong> {{ challenge.can_skip }}
		</li>

		<li>
			<strong>Type:</strong>
				{% ifequal challenge.challenge_type 1 %}Textual{% endifequal %}
				{% ifequal challenge.challenge_type 2 %}Photo{% endifequal %}
				{% ifequal challenge.challenge_type 3 %}
				Location (target: latitude {{ challenge.target_place.y }}; longitude {{ challenge.target_place.x }})
				{% endifequal %}
		</li>

		{% ifequal challenge.challenge_type 3 %}
		<li>
			<strong>Min Distance to Target Place:</strong> {{ challenge.distance_to_target_place }} meter{{ challenge.distance_to_target_place|pluralize }}
		</li>

		<li>
			<strong>Mark Target Place to Team:</strong> {% if challenge.mark_place %}Yes{% else %}No{% endif %}
		</li>

		{% endifequal %}

		<li>
			<strong>Next Challenge Identifier:</strong> {{ challenge.next_challenge_id }}
		</li>

		<li>
			<strong>Learning Objectives:</strong>
			{% if challenge.objectives.all %}
			<ul>
				{% for learnobj in challenge.objectives.all %}
				  <li>{{ learnobj.objective }}</li>
				{% endfor %}

			</ul>

			{% else %}

			None

			{% endif %}

		</li>

		</ul>

		<form action="/gymkhana/event/{{ event.id }}/challenge/{{ challenge.id }}/delete/" method="get" data-ajax="false">

			<input type="submit" value="Delete"></input>

		</form>

		</li>

		<br>

	{% endfor %}

		</ol>

	</div>

</fieldset>

{% endif %} <!-- if challenges -->



<fieldset>

	<legend>Adding Teams</legend>

	<ul>

		<li><strong>Create & Subscribe to Event:</strong>

			<form name="form2" action="/gymkhana/event/{{ event.id }}/team/create/" method="post" enctype="multipart/form-data" data-ajax="false" onsubmit="return checkRequiredForm2(this)">

				<br>
					<label for="teamname" class="required">Team Name:</label>
					<input type="text" id="teamname" name="teamname" size="50" maxlength="255" required/>
				<br></br>

					<label for="first_challenge_team" class="required">First Challenge for This Team:</label>
					<fieldset class="ui-grid-a" id="simple">
						<div class="ui-block-a">
							<select name="first_challenge_team_id">
								<option value="None">-</option>
								{% for challenge in challenges %}

								<option value="{{ challenge.id }}">{{ challenge.number }}</option>

								{% endfor %}

							</select>

						</div>

						<div class="ui-block-b"> 
							<input type="submit" value="Add"></input>
						</div>
					</fieldset>
			</form>
		</li>

		{% if all_teams %}

		<br></br>

		<li><strong>Subscribe to Event:</strong>

			<form action="/gymkhana/event/{{ event.id }}/team/subscribe/" method="post" enctype="multipart/form-data" data-ajax="false">

				<br>
					<select name="team_to_subscribe_id">
						{% for team in all_teams %}
						<option value="{{ team.id }}">{{ team.group.name }}</option>
						{% endfor %}
					</select>
				<br></br>

					<label for="first_challenge_team" class="required">First Challenge for This Team:</label>

					<fieldset class="ui-grid-a" id="simple">

						<div class="ui-block-a">
							<select name="first_challenge_team_id">
								<option value="None">-</option>
								{% for challenge in challenges %}
									<option value="{{ challenge.id }}">{{ challenge.number }}</option>
								{% endfor %}
							</select>
						</div>

						<div class="ui-block-b"> 
							<input type="submit" value="Subscribe"></input>
						</div>
					</fieldset>
			</form>
		</li>
		{% endif %}
	</ul>

</fieldset>



{% endif %} <!-- if isAdmin -->



{% if teams %}



<fieldset>

	<legend>Listing Teams</legend>

	<div name="fieldset_content" id="fieldset_content">

	<ul>

	{% for team in teams %}

		<li>
			<strong>Team Name:</strong> <a href="/gymkhana/event/{{ event.id }}/team/{{ team.id }}/show/">{{ team.group.name }}</a> (id: {{ team.id }})
		<ul><br>

		<li>
			<strong>Event:</strong> {{ event.title }}
		</li>


		{% for first_challenge in first_challenges %}
		{% ifequal team first_challenge.team %}
		{% ifequal event first_challenge.event %}
		<li>
			<strong>First Challenge:</strong> #{{ first_challenge.first_challenge.number }} (id: {{ first_challenge.first_challenge.id }})
		</li>

		{% endifequal %}

		{% endifequal %}

		{% endfor %}


		{% if isAdmin %}

		{% if challenges %}

		<li>

			<form action="/gymkhana/event/{{ event.id }}/team/{{ team.id }}/edit/" method="get" data-ajax="false">

				<fieldset class="ui-grid-a" id="simple">

					<div class="ui-block-a">

						<select name="first_challenge_team_id">
							<option value="None">-</option>
							{% for challenge in challenges %}
							<option value="{{ challenge.id }}">{{ challenge.number }}</option>
							{% endfor %}
						</select>

					</div>

					<div class="ui-block-b"> 
						<input type="submit" value="Change"></input>
					</div>

				</fieldset>

			</form>

		</li>

		{% endif %}

		{% endif %}

		</ul>



		<form action="/gymkhana/event/{{ event.id }}/team/{{ team.id }}/delete/" method="get" data-ajax="false">

			<input type="submit" value="Delete"></input>

		</form>

		<br>

		</li>

	{% endfor %}

	</ul>

	</div>



</fieldset>



{% if isAdmin %}


{% endif %} <!-- if isAdmin -->



{% endif %} <!-- if teams -->



{% endblock %}


{% block java_script %}
<script type="text/javascript">
	//<![CDATA[
		
	//Function alerts the index of the selected option within form
	function alertSelected1(){
		if ($('#select_num_possible_solutions option:selected').text() != ""){
			var num_possible_solutions = $('#select_num_possible_solutions option:selected').text();
			var new_text = "";
			for (x = 1; x <= num_possible_solutions; x++){
				new_text = new_text + "<br></br><label for=\"possible_solution_" + x + "\" class=\"required\">Solution #" + x +":</label><input type=\"text\" id=\"possible_solution_" + x +"\" name=\"possible_solution_" + x +"\" size=\"45\" maxlength=\"255\"/\>";
			}
			var div = $('#div_possible_solutions');
			div.html(new_text);

			for (x = 1; x <= num_possible_solutions; x++){
		        	$('#possible_solution_' + x).css('line-height','2').css( 'font-size', '16px').css('border', '1px solid #999').css('border-radius', '10px').css('width', '100%');
		        }
		}
	}

	//Function alerts the index of the selected option within form
	function alertSelected2(){
		if ($('#select_num_clues option:selected').text() != ""){
			var num_clues = $('#select_num_clues option:selected').text();
			var new_text = "";
			for (x = 1; x <= num_clues; x++){
				new_text = new_text + "<br><div><label for=\"clue_" + x + "\" class=\"required\">Clue #" + x + ":</label><input type=\"text\" id=\"clue_" + x + "\" name=\"clue_" + x + "\" size=\"45\" maxlength=\"255\"/\></div><br>";
			}
			var div = $('#div_clues');
			div.html(new_text);

			for (x = 1; x <= num_clues; x++){
		        	$('#clue_' + x).css('line-height','2').css( 'font-size', '16px').css('border', '1px solid #999').css('border-radius', '10px').css('width', '100%');
		        }
		}
	}

	function editIsStop(){
		var value = getRadioButtonSelectedValue(document.form1.is_stop);
		var new_text;
		if (value == "Yes"){
			new_text = "<div name=\"block_and_skip\" id=\"block_and_skip\"><label for=\"is_stop\" class=\"is_stop\">Response Must be Correct to Continue:</label><input type=\"radio\" name=\"is_stop\" value=\"Yes\" checked onclick=\"editIsStop()\">Yes</input><input type=\"radio\" name=\"is_stop\" value=\"No\" onclick=\"editIsStop()\">No</input><input type=\"hidden\" name=\"can_skip\" value=\"No\"></div><br></br>";
		}else{
			new_text="<div name=\"block_and_skip\" id=\"block_and_skip\"><label for=\"is_stop\" class=\"is_stop\">Response Must be Correct to Continue:</label><input type=\"radio\" name=\"is_stop\" value=\"Yes\" onclick=\"editIsStop()\">Yes</input><input type=\"radio\" name=\"is_stop\" value=\"No\" checked onclick=\"editIsStop()\">No</input><br></br><br></br><br></br><br></br><br></br><label for=\"can_skip\" class=\"can_skip\">Challenge Can be Skipped:</label><input type=\"radio\" name=\"can_skip\" value=\"Yes\">Yes</input><input type=\"radio\" name=\"can_skip\" value=\"No\" checked>No</input></div>";
		}
		var div = document.getElementById('block_and_skip');
		div.innerHTML = new_text;
	}

	function editChallengeType(){
		var value = getRadioButtonSelectedValue(document.form1.challenge_type);
		var new_text;
		if (value == "1"){
			new_text = "<br></br><div><!--<label for=\"challenge_subtype\" class=\"challenge_subtype\">Textual - Augmented Reality:</label><input type=\"radio\" name=\"augmented_reality\" value=\"Yes\">Yes</input><input type=\"radio\" name=\"augmented_reality\" value=\"No\" checked >No</input></div><br></br><br></br><br></br>--><div name=\"challenge_data\" id=\"challenge_data\"><div name=\"block_and_skip\" id=\"block_and_skip\"><label for=\"is_stop\" class=\"is_stop\">Response Must be Correct to Continue:</label><input type=\"radio\" name=\"is_stop\" value=\"Yes\">Yes</input><input type=\"radio\" name=\"is_stop\" value=\"No\" checked>No</input><br></br><br></br><br></br><br></br><br></br><label for=\"can_skip\" class=\"can_skip\">Challenge Can be Skipped:</label><input type=\"radio\" name=\"can_skip\" value=\"Yes\">Yes</input><input type=\"radio\" name=\"can_skip\" value=\"No\" checked>No</input></div><br></br><br></br><br></br><br></br><div><label for=\"select\" class=\"required\">Number Possible Solutions:</label><select name=\"select_num_possible_solutions\" id=\"select_num_possible_solutions\" onchange=\"alertSelected1()\"><option value=\"1\">1</option><option value=\"2\">2</option><option value=\"3\">3</option><option value=\"4\">4</option><option value=\"5\">5</option></select></div><br></br><br></br><br></br><div name=\"div_possible_solutions\" id=\"div_possible_solutions\"><label for=\"possible_solution_1\" class=\"required\">Solution:</label><input type=\"text\" id=\"possible_solution_1\" name=\"possible_solution_1\" size=\"45\" maxlength=\"255\"/\></div></div>";
			/*new_text = "<div name=\"block_and_skip\" id=\"block_and_skip\"><label for=\"is_stop\" class=\"is_stop\">Response Must be Correct to Continue:</label><input type=\"radio\" name=\"is_stop\" value=\"Yes\">Yes</input><input type=\"radio\" name=\"is_stop\" value=\"No\" checked>No</input><br></br><br></br><br></br><br></br><br></br><label for=\"can_skip\" class=\"can_skip\">Users Can Skip to Another Challenge:</label><input type=\"radio\" name=\"can_skip\" value=\"Yes\">Yes</input><input type=\"radio\" name=\"can_skip\" value=\"No\" checked>No</input></div><div name=\"challenge_data\" id=\"challenge_data\"><label for=\"select\" class=\"required\">Number Possible Solutions:</label><select name=\"select_num_possible_solutions\" id=\"select_num_possible_solutions\" onchange=\"alertSelected1()\"><option value=\"1\">1</option><option value=\"2\">2</option><option value=\"3\">3</option><option value=\"4\">4</option><option value=\"5\">5</option></select></div><br></br><br></br><br></br><div name=\"div_possible_solutions\" id=\"div_possible_solutions\"><label for=\"possible_solution_1\" class=\"required\">Possible Solution:</label><input type=\"text\" id=\"possible_solution_1\" name=\"possible_solution_1\" size=\"50\" maxlength=\"255\"/\></div><br></br><br></br><br></br><br></br><br></br>";*/
		}else if (value == "2"){
			new_text = "<div name=\"challenge_data\" id=\"challenge_data\"><input type=\"hidden\" name=\"is_stop\" value=\"No\"><div name=\"block_and_skip\" id=\"block_and_skip\"><label for=\"can_skip\" class=\"can_skip\">Challenge Can be Skipped:</label><input type=\"radio\" name=\"can_skip\" value=\"Yes\">Yes</input><input type=\"radio\" name=\"can_skip\" value=\"No\" checked>No</input></div><br></br><br></br><br></br></div>";
		}else if (value == "3"){
			new_text = "<div name=\"challenge_data\" id=\"challenge_data\"><input type=\"hidden\" name=\"is_stop\" value=\"No\"><div name=\"block_and_skip\" id=\"block_and_skip\"><label for=\"can_skip\" class=\"can_skip\">Challenge Can be Skipped:</label><input type=\"radio\" name=\"can_skip\" value=\"Yes\">Yes</input><input type=\"radio\" name=\"can_skip\" value=\"No\" checked>No</input></div><br></br><br></br><br></br><br></br></div><div><label for=\"target_latitude\" class=\"target_latitude\">Target Latitude:</label><input type=\"text\" id=\"target_latitude\" name=\"target_latitude\" size=\"15\" maxlength=\"15\"/\></div><br></br><div><label for=\"target_longitude\" class=\"target_longitude\">Target Longitude:</label><input type=\"text\" id=\"target_longitude\" name=\"target_longitude\" size=\"15\" maxlength=\"15\"/\></div><br></br><div><label for=\"min_distance\" class=\"min_distance\">Min Distance to Place (meters):</label><input type=\"text\" id=\"min_distance\" name=\"min_distance\" size=\"5\" maxlength=\"5\"/\></div><br></br><br></br><div><label for=\"mark_target_place\" class=\"mark_target_place\">Mark Place to Team:</label><input type=\"radio\" name=\"mark_target_place\" value=\"Yes\">Yes</input><input type=\"radio\" name=\"mark_target_place\" value=\"No\" checked>No</input></div><br></br>";
		}
		var div = document.getElementById('challenge_data');
		div.innerHTML = new_text;
	}

	function getRadioButtonSelectedValue(ctrl){
		for(var i=0;i<ctrl.length;i++){
			if(ctrl[i].checked){
				return ctrl[i].value;
			}
		}
	}

	function checkRequiredForm2(which){
		if (document.images){
			for (i=0;i<which.length;i++){
				var tempobj=which.elements[i]
				if (tempobj.name.substring(0,8)=="teamname"){
					if (tempobj.type=="text"&&tempobj.value==''){
						alert("Team Name Field is Empty.");
						return false;
					}else{
						// Controlamos que el nick solo tenga caracteres de la A-Z, a-z y 0-9, pues caracteres
						// acentuados, enye, cedilla, etc., pueden traer problemas en el tratamiento de URL's:
						var team_name=tempobj.value;
						for(var q=0;q<team_name.length;q++){
							if ( (team_name[q].charCodeAt(0) >= 65 && team_name[q].charCodeAt(0) <= 90) ||
									(team_name[q].charCodeAt(0) >= 97 && team_name[q].charCodeAt(0) <= 122) ||
									(team_name[q].charCodeAt(0) >= 48 && team_name[q].charCodeAt(0) <= 57)  || title[q] == ' '){
									}
							else{
								alert("Team Name field contains unsupported character/s (only 0-9, A-Z, a-z and space).");
								return false;
							}
						}
					}
				
				}
			}
		}
	}

	function checkRequiredForm1(which){
		var challenge = document.form1.challenge.value;
		if (challenge==''){
			alert("Challenge Field is Empty.");
			return false;
		}
		if (document.images){
			for (i=0;i<which.length;i++){
				var tempobj=which.elements[i];
				if (tempobj.name.substring(0,9)=="max_score"){
					if (tempobj.type=="text"&&tempobj.value==''){
						alert("Maximum Score Field is Empty.");
						return false;
					}else{
						var max_score = tempobj.value;
						if(!isNumber(max_score)){
							alert("Maximum Score is not a Number.");
							return false;
						}
					}
				}else if (tempobj.name.substring(0,19)=="possible_solution_1" || tempobj.name.substring(0,19)=="possible_solution_2" || tempobj.name.substring(0,19)=="possible_solution_3" || tempobj.name.substring(0,19)=="possible_solution_4" || tempobj.name.substring(0,19)=="possible_solution_5"){
					var challenge_type = $('input[name=challenge_type]:checked').val();
					if ((tempobj.type=="text"&&tempobj.value=='') && (challenge_type == 1)){
						alert("A Possible Solution is Empty.");
						return false;
					}
				}else if (tempobj.name.substring(0,6)=="clue_1" || tempobj.name.substring(0,6)=="clue_3" || tempobj.name.substring(0,6)=="clue_3"){
					if (tempobj.type=="text"&&tempobj.value==''){
						alert("A Clue is Empty.");
						return false;
					}
				}
			}
		}
	}

	function isNumber(str){
		if(str.length==0)
			return false;
		var numdecs = 0;
		for (i = 0; i < str.length; i++){
			var mychar = str.charAt(i);
			if ((mychar >= "0" && mychar <= "9") || mychar == "." ){
				if (mychar == ".")
					numdecs++;
			}else return false;
		}
		return true;
	}

	//]]>	
</script>
<script src="/gymkhana/templates/jq/show_gymkhana.js"></script>
{% endblock %}
